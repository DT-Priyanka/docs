<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Apex Development Setup - DataTorrent Documentation</title>
  

  <link rel="shortcut icon" href="../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Apex Development Setup";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44586211-2', 'docs.datatorrent.com');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">DataTorrent RTS</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Demos</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demo_videos/">Videos</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demos/">Running Apps</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sandbox/">Sandbox</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Development</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../create/">Creating Applications</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <ul class="subnav">
    <li><span>Top N Words</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c1/">Development Environment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c2/">Building in Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c3/">Building with dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c4/">Monitoring with dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c5/">Visualizing with dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c6/">Appendix</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/sales_dimensions/">Sales Dimenions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Apex Development Setup</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#apache-apex-development-environment-setup">Apache Apex Development Environment Setup</a></li>
                
                    <li><a class="toctree-l4" href="#microsoft-windows">Microsoft Windows</a></li>
                
                    <li><a class="toctree-l4" href="#linux">Linux</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Applications</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../application_packages/">Application Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../configuration_packages/">Configuration Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operator_development/">Operators</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Library Operators</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/io/file_splitter/">File splitter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/io/block_reader/">Block reader</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File Input, S3, NFS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File Output</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Deduper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HDHT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">DimensionsStore</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">DimenstionComputation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaInput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaOutput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Solace</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">JMS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HBase</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtgateway_api/">REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../autometrics/">AutoMetric API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Scalable Design</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Applications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtingest/">dtIngest</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Platform</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rts/">RTS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtmanage/">dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtassemble/">dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtdashboard/">dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtGateway</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex/">Apache Apex</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex_malhar/">Apache Apex-Malhar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Deployment and Operations</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtgateway_security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtCli</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../additional_docs/">Resources</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
    
    <li>Apex Development Setup</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="apache-apex-development-environment-setup">Apache Apex Development Environment Setup</h1>
<p>This document discusses the steps needed for setting up a development environment for creating applications that run on the Apache Apex or the DataTorrent RTS streaming platform.</p>
<h2 id="microsoft-windows">Microsoft Windows</h2>
<p>There are a few tools that will be helpful when developing Apache Apex applications, some required and some optional:</p>
<ol>
<li>
<p><em>git</em> -- A revision control system (version 1.7.1 or later). There are multiple git clients available for Windows (<a href="http://git-scm.com/download/win">http://git-scm.com/download/win</a> for example), so download and install a client of your choice.</p>
</li>
<li>
<p><em>java JDK</em> (not JRE). Includes the Java Runtime Environment as well as the Java compiler and a variety of tools (version 1.7.0_79 or later). Can be downloaded from the Oracle website.</p>
</li>
<li>
<p><em>maven</em> -- Apache Maven is a build system for Java projects (version 3.0.5 or later). It can be downloaded from <a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>.</p>
</li>
<li>
<p><em>VirtualBox</em> -- Oracle VirtualBox is a virtual machine manager (version 4.3 or later) and can be downloaded from <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a>. It is needed to run the Data Torrent Sandbox.</p>
</li>
<li>
<p><em>DataTorrent Sandbox</em> -- The sandbox can be downloaded from <a href="https://www.datatorrent.com/download">https://www.datatorrent.com/download</a>. It is useful for testing simple applications since it contains Apache Hadoop and Data Torrent RTS 3.1.1 pre-installed with a time-limited Enterprise License. If you already installed the RTS Enterprise Edition (evaluation or production license) on a cluster, you can use that setup for deployment and testing instead of the sandbox.</p>
</li>
<li>
<p>(Optional) If you prefer to use an IDE (Integrated Development Environment) such as <em>NetBeans</em>, <em>Eclipse</em> or <em>IntelliJ</em>, install that as well.</p>
</li>
</ol>
<p>After installing these tools, make sure that the directories containing the executable files are in your PATH environment; for example, for the JDK executables like <em>java</em> and <em>javac</em>, the directory might be something like <code>C:\\Program Files\\Java\\jdk1.7.0\_80\\bin</code>; for <em>git</em> it might be <code>C:\\Program Files\\Git\\bin</code>; and for maven it might be <code>C:\\Users\\user\\Software\\apache-maven-3.3.3\\bin</code>. Open a console window and enter the command:</p>
<pre><code>echo %PATH%
</code></pre>
<p>to see the value of the <code>PATH</code> variable and verify that the above directories are present. If not, you can change its value clicking on the button at <em>Control Panel</em> &#x21e8; <em>Advanced System Settings</em> &#x21e8; <em>Advanced tab</em> &#x21e8; <em>Environment Variables</em>.</p>
<p>Now run the following commands and ensure that the output is something similar to that shown in the table below:</p>
<table>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><p>Command</p></td>
<td align="left"><p>Output</p></td>
</tr>
<tr class="even">
<td align="left"><p><tt>javac -version</tt></p></td>
<td align="left"><p>javac 1.7.0_80</p></td>
</tr>
<tr class="odd">
<td align="left"><p><tt>java -version</tt></p></td>
<td align="left"><p>java version &quot;1.7.0_80&quot;</p>
<p>Java(TM) SE Runtime Environment (build 1.7.0_80-b15)</p>
<p>Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)</p></td>
</tr>
<tr class="even">
<td align="left"><p><tt>git --version</tt></p></td>
<td align="left"><p>git version 2.6.1.windows.1</p></td>
</tr>
<tr class="odd">
<td align="left"><p><tt>mvn --version</tt></p></td>
<td align="left"><p>Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T06:57:37-05:00)</p>
<p>Maven home: C:\Users\ram\Software\apache-maven-3.3.3\bin\..</p>
<p>Java version: 1.7.0_80, vendor: Oracle Corporation</p>
<p>Java home: C:\Program Files\Java\jdk1.7.0_80\jre</p>
<p>Default locale: en_US, platform encoding: Cp1252</p>
<p>OS name: &quot;windows 8&quot;, version: &quot;6.2&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;</p></td>
</tr>
</tbody>
</table>

<p>To install the sandbox, first download it from <a href="https://www.datatorrent.com/download">https://www.datatorrent.com/download</a> and import the downloaded file into VirtualBox. Once the import completes, you can select it and click the  Start button to start the sandbox.</p>
<p>The sandbox is configured with 6GB RAM; if your development machine has 16GB or more, you can increase the sandbox RAM to 8GB or more using the VirtualBox console. This will yield better performance and support larger applications. Additionally, you can change the network adapter from <strong>NAT</strong> to <strong>Bridged Adapter</strong>; this will allow you to login to the sandbox from your host machine using an <em>ssh</em> tool like <strong>PuTTY</strong> and also to transfer files to and from the host using <code>pscp</code> on Windows. Of course all such configuration must be done when when the sandbox is not running.</p>
<p>You can choose to develop either directly on the sandbox or on your development machine. The advantage of the former is that most of the tools (e.g. <em>jdk</em>, <em>git</em>, <em>maven</em>) are pre-installed and also the package files created by your project are directly available to the Data Torrent tools such as  <strong>dtManage</strong> and <strong>dtcli</strong>. The disadvantage is that the sandbox is a memory-limited environment so running a memory-hungry tool like a Java IDE on it may starve other applications of memory.</p>
<p>You can now use the maven archetype to create a basic Apache Apex project as follows: Put these lines in a Windows command file called, for example, <code>newapp.cmd</code> and run it:</p>
<pre><code>@echo off
@rem Script for creating a new application
setlocal
mvn archetype:generate ^
-DarchetypeRepository=https://www.datatorrent.com/maven/content/repositories/releases ^
  -DarchetypeGroupId=com.datatorrent ^
  -DarchetypeArtifactId=apex-app-archetype ^
  -DarchetypeVersion=3.1.1 ^
  -DgroupId=com.example ^
  -Dpackage=com.example.myapexapp ^
  -DartifactId=myapexapp ^
  -Dversion=1.0-SNAPSHOT
endlocal
</code></pre>
<p>The caret (^) at the end of some lines indicates that a continuation line follows. When you run this file, the properties will be displayed and you will be prompted with <code>Y: :</code>; just press <strong>Enter</strong> to complete the project generation.</p>
<p>This command file also exists in the Data Torrent <em>examples</em> repository which you can check out with:</p>
<pre><code>git clone https://github.com/DataTorrent/examples
</code></pre>
<p>You will find the script under <code>examples\tutorials\topnwords\scripts\newapp.cmd</code>.</p>
<p>You can also, if you prefer, use an IDE to generate the project as described in Section 3 of <a href="../application_packages/">Application Packages</a> but use the archetype version 3.1.1 instead of 3.0.0.</p>
<p>When the run completes successfully, you should see a new directory named <code>myapexapp</code> containing a maven project for building a basic Apache Apex application. It includes 3 source files:<strong>Application.java</strong>,  <strong>RandomNumberGenerator.java</strong> and <strong>ApplicationTest.java</strong>. You can now build the application by stepping into the new directory and running the appropriate maven command:</p>
<pre><code>cd myapexapp
mvn clean package -DskipTests
</code></pre>
<p>The build should create the application package file <code>myapexapp\target\myapexapp-1.0-SNAPSHOT.apa</code>. This file can then be uploaded to the Data Torrent GUI tool on the sandbox (called <strong>dtManage</strong>) and launched  from there. It generates a stream of random numbers and prints them out, each prefixed by the string  <code>hello world:</code>.  If you built this package on the host, you can transfer it to the sandbox using the <code>pscp</code> tool bundled with <strong>PuTTY</strong> mentioned earlier.</p>
<p>If you want to checkout the Apache Apex source repositories and build them, you can do so by running the script <code>build-apex.cmd</code> located in the same place in the examples repository described above. The source repositories contain more substantial demo applications and the associated source code. Alternatively, if you do not want to use the script, you can follow these simple manual steps:</p>
<ol>
<li>
<p>Check out the source code repositories:</p>
<pre><code>git clone https://github.com/apache/incubator-apex-core
git clone https://github.com/apache/incubator-apex-malhar
</code></pre>
</li>
<li>
<p>Switch to the appropriate release branch and build each repository:</p>
<pre><code>pushd incubator-apex-core
git checkout release-3.1
mvn clean install -DskipTests
popd
pushd incubator-apex-malhar
git checkout release-3.1
mvn clean install -DskipTests
popd
</code></pre>
</li>
</ol>
<p>The <code>install</code> argument to the <code>mvn</code> command installs resources from each project to your local maven repository (typically <code>.m2/repository</code> under your home directory), and <strong>not</strong> to the system directories, so Administrator privileges are not required. The  <code>-DskipTests</code> argument skips running unit tests since they take a long time. If this is a first-time installation, it might take several minutes to complete because maven will download a number of associated plugins.</p>
<p>After the build completes, you should see the demo application package files in the target directory under each demo subdirectory in <code>incubator-apex-malhar\demos\</code>.</p>
<h2 id="linux">Linux</h2>
<p>Most of the instructions for Linux (and other Unix-like systems) are similar to those for Windows described above, so we will just note the differences.</p>
<p>The pre-requisites (such as <em>git</em>, <em>maven</em>, etc.) are the same as for Windows described above; please run the commands in the table and ensure that appropriate versions are present in your PATH environment variable (the command to display that variable is: <code>echo $PATH</code>).</p>
<p>The maven archetype command is the same except that continuation lines use a backslash (<code>\</code>) instead of caret (<code>^</code>); the script for it is available in the same location and is named <code>newapp</code> (without the <code>.cmd</code> extension). The script to checkout and build the Apache Apex repositories is named <code>build-apex</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../coming_soon/" class="btn btn-neutral float-right" title="Applications"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tutorials/sales_dimensions/" class="btn btn-neutral" title="Sales Dimenions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../tutorials/sales_dimensions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../coming_soon/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
