<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration Packages - DataTorrent Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Configuration Packages";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">DataTorrent RTS</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Demos</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demo_videos/">Videos</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demos/">Applications</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Sandbox</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sandbox/">Welcome to the Sandbox</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sandbox_demos/">Sandbox Demos</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sandbox_services/">Sandbox Services</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Platform</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rts/">RTS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtassemble/">dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtdashboard/">dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtGateway</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex/">Apache Apex</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Apache Apex Deep Dive</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex_malhar/">Apache Apex-Malhar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Applications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtingest/">dtIngest</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Deployment and Operations</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Quick Start</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtCli</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Development</span></li>

        
            
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../create_wordcount_app/">Top N Words</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Twitter Top Hashtags</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../create/">Sales Dimenions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Applications</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ApexPackage/">Application Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Configuration Packages</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#application-configuration-packages">Application Configuration Packages</a></li>
                
            
                <li class="toctree-l3"><a href="#introduction">Introduction</a></li>
                
            
                <li class="toctree-l3"><a href="#requirements">Requirements</a></li>
                
            
                <li class="toctree-l3"><a href="#creating-your-first-configuration-package">Creating Your First Configuration Package</a></li>
                
                    <li><a class="toctree-l4" href="#using-command-line">Using Command Line</a></li>
                
                    <li><a class="toctree-l4" href="#using-ide">Using IDE</a></li>
                
            
                <li class="toctree-l3"><a href="#assembling-your-own-configuration-package">Assembling your own configuration package</a></li>
                
                    <li><a class="toctree-l4" href="#pomxml">pom.xml</a></li>
                
                    <li><a class="toctree-l4" href="#srcmainresourcesclasspath">./src/main/resources/classpath</a></li>
                
                    <li><a class="toctree-l4" href="#srcmainresourcesfiles">./src/main/resources/files</a></li>
                
                    <li><a class="toctree-l4" href="#properties-xml-file">Properties XML file</a></li>
                
                    <li><a class="toctree-l4" href="#zip-structure-of-configuration-package">Zip structure of configuration package</a></li>
                
            
                <li class="toctree-l3"><a href="#launching-with-cli">Launching with CLI</a></li>
                
            
                <li class="toctree-l3"><a href="#related-rest-api">Related REST API</a></li>
                
                    <li><a class="toctree-l4" href="#post-wsv2configpackages">POST /ws/v2/configPackages</a></li>
                
                    <li><a class="toctree-l4" href="#get-wsv2configpackagesapppackagenameapppackageversion">GET /ws/v2/configPackages?appPackageName=...&amp;appPackageVersion=...</a></li>
                
                    <li><a class="toctree-l4" href="#get-wsv2configpackagesuserapppackagenameapppackageversion">GET /ws/v2/configPackages/&lt;user&gt;?appPackageName=...&amp;appPackageVersion=...</a></li>
                
                    <li><a class="toctree-l4" href="#get-wsv2configpackagesusername">GET /ws/v2/configPackages/&lt;user&gt;/&lt;name&gt;</a></li>
                
                    <li><a class="toctree-l4" href="#get-wsv2configpackagesusernamedownload">GET /ws/v2/configPackages/&lt;user&gt;/&lt;name&gt;/download</a></li>
                
                    <li><a class="toctree-l4" href="#post-wsv2apppackagesuserapp-pkg-nameapp-pkg-versionapplicationsapp-namelaunchconfigpackageuserconfpkgname">POST /ws/v2/appPackages/&lt;user&gt;/&lt;app-pkg-name&gt;/&lt;app-pkg-version&gt;/applications/{app-name}/launch?configPackage=&lt;user&gt;/&lt;confpkgname&gt;</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Operators</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Library Operators</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File splitter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Block reader</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File Input, S3, NFS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File Output</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Deduper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HDHT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">DimensionsStore</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">DimenstionComputation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaInput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaOutput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Solace</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">JMS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HBase</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Scalable Design</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../additional_docs/">Glossary</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
    
    <li>Configuration Packages</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="application-configuration-packages">Application Configuration Packages</h1>
<h1 id="introduction">Introduction</h1>
<p>An Apex Application Configuration Package is a zip file that contains
configuration files and additional files to be launched with an
<a href="https://www.datatorrent.com/docs/guides/ApplicationPackages.html">Application Package</a> using 
DTCLI or REST API.  This guide assumes the reader’s familiarity of
Application Package.  Please read the Application Package document to
get yourself familiar with the concept first if you have not done so.</p>
<h1 id="requirements">Requirements</h1>
<p>You will need have the following installed:</p>
<ol>
<li>Apache Maven 3.0 or later (for assembling the Config Package)</li>
<li>Apex 3.0.0 or later (for launching the App Package with the Config
    Package in your cluster)</li>
</ol>
<h1 id="creating-your-first-configuration-package">Creating Your First Configuration Package</h1>
<p>You can create a Configuration Package using your Linux command line, or
using your favorite IDE.  </p>
<h2 id="using-command-line">Using Command Line</h2>
<p>First, change to the directory where you put your projects, and create a
DT configuration project using Maven by running the following command.
 Replace "com.example", "mydtconfig" and "1.0-SNAPSHOT" with the
appropriate values:</p>
<pre><code> $ mvn archetype:generate                                                
 -DarchetypeRepository=https://www.datatorrent.com/maven/content/reposito 
 ries/releases                                                            
 -DarchetypeGroupId=com.datatorrent                                       
 -DarchetypeArtifactId=apex-conf-archetype -DarchetypeVersion=3.0.0       
 -DgroupId=com.example -Dpackage=com.example.mydtconfig                   
 -DartifactId=mydtconfig -Dversion=1.0-SNAPSHOT                           

</code></pre>

<p>This creates a Maven project named "mydtconfig". Open it with your
favorite IDE (e.g. NetBeans, Eclipse, IntelliJ IDEA).  Try it out by
running the following command:</p>
<pre><code>$ mvn package                                                         
</code></pre>

<p>The "mvn package" command creates the Config Package file in target
directory as target/mydtconfig.apc. You will be able to use that
Configuration Package file to launch an application in your actual
DataTorrent RTS installation.</p>
<h2 id="using-ide">Using IDE</h2>
<p>Alternatively, you can do the above steps all within your IDE.  For
example, in NetBeans, select File -> New Project.  Then choose “Maven”
and “Project from Archetype” in the dialog box, as shown.</p>
<p><img alt="" src="../images/AppConfig/ApplicationConfigurationPackages.html-image01.png" /></p>
<p>Then fill the Group ID, Artifact ID, Version and Repository entries as
shown below.</p>
<p><img alt="" src="../images/AppConfig/ApplicationConfigurationPackages.html-image02.png" /></p>
<p>Group ID: com.datatorrent
Artifact ID: apex-conf-archetype
Version: 3.0.0 (or any later version)</p>
<p>Repository:
<a href="https://www.datatorrent.com/maven/content/repositories/releases">https://www.datatorrent.com/maven/content/repositories/releases</a></p>
<p><a href="https://www.datatorrent.com/maven/content/repositories/releases"></a></p>
<p>Press Next and fill out the rest of the required information. For
example:</p>
<p><img alt="" src="../images/AppConfig/ApplicationConfigurationPackages.html-image00.png" /></p>
<p>Click Finish, and now you have created your own Apex
Configuration Package project.  The procedure for other IDEs, like
Eclipse or IntelliJ, is similar.</p>
<h1 id="assembling-your-own-configuration-package">Assembling your own configuration package</h1>
<p>Inside the project created by the archetype, these are the files that
you should know about when assembling your own configuration package:</p>
<pre><code>    ./pom.xml
    ./src/main/resources/classpath
    ./src/main/resources/files
</code></pre>
<p>./src/main/resources/META-INF/properties.xml
./src/main/resources/META-INF/properties-{appname}.xml</p>
<h2 id="pomxml">pom.xml</h2>
<p>Example:</p>
<pre><code>  &lt;groupId&gt;com.example&lt;/groupId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;artifactId&gt;mydtconf&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;!-- change these to the appropriate values --&gt;
  &lt;name&gt;My DataTorrent Application Configuration&lt;/name&gt;
  &lt;description&gt;My DataTorrent Application Configuration Description&lt;/description&gt;
  &lt;properties&gt;
    &lt;datatorrent.apppackage.name&gt;mydtapp&lt;/datatorrent.apppackage.name&gt;
    &lt;datatorrent.apppackage.minversion&gt;1.0.0&lt;/datatorrent.apppackage.minversion&gt;
   &lt;datatorrent.apppackage.maxversion&gt;1.9999.9999&lt;/datatorrent.apppackage.maxversion&gt;
    &lt;datatorrent.appconf.classpath&gt;classpath/*&lt;/datatorrent.appconf.classpath&gt;
    &lt;datatorrent.appconf.files&gt;files/*&lt;/datatorrent.appconf.files&gt;
  &lt;/properties&gt; 

</code></pre>

<p>In pom.xml, you can change the values of  <code>&lt;groupId&gt;, &lt;version&gt;,
&lt;artifactId&gt;, &lt;name&gt;</code>and <code>&lt;description&gt;</code> to your desired values.  </p>
<p>You can also change the values of <code>&lt;datatorrent.apppackage.name&gt;, &lt;datatorrent.apppackage.minversion&gt; &lt;datatorrent.apppackage.maxversion&gt;</code>
to reflect what app packages should be used with this configuration
package.  Apex will use this information to check whether a
configuration package is compatible with the application package when
you issue a launch command.</p>
<h2 id="srcmainresourcesclasspath">./src/main/resources/classpath</h2>
<p>Place any file in this directory that you’d like to be copied to the
compute machines when launching an application and included in the
classpath of the application.  Example of such files are Java properties
files and jar files.</p>
<h2 id="srcmainresourcesfiles">./src/main/resources/files</h2>
<p>Place any file in this directory that you’d like to be copied to the
compute machines when launching an application but not included in the
classpath of the application.</p>
<h2 id="properties-xml-file">Properties XML file</h2>
<p>A properties xml file consists of a set of key-value pairs.  The set of
key-value pairs specifies the configuration options the application
should be launched with.  </p>
<p>Example:</p>
<pre><code>&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;some-property-name&lt;/name&gt;
    &lt;value&gt;some-property-value&lt;/value&gt;
  &lt;/property&gt;
   ...
&lt;/configuration&gt;
</code></pre>

<p>Names of properties XML file:</p>
<p><strong>properties.xml:</strong> Properties that are global to the Configuration
Package</p>
<p><strong>properties-{appName}.xml:</strong> Properties that are specific when launching
an application with the specified appName within the Application
Package.</p>
<p>After you are done with the above, remember to do mvn package to
generate a new configuration package, which will be located in the
target directory in your project.</p>
<h2 id="zip-structure-of-configuration-package">Zip structure of configuration package</h2>
<p>Apex Application Configuration Package files are zip files.  You
can examine the content of any Application Configuration Package by
using unzip -t on your Linux command line.  The structure of the zip
file is as follow:</p>
<pre><code>META-INF
  MANIFEST.MF
  properties.xml
  properties-{appname}.xml
classpath
  {classpath files}
files
  {files} 
</code></pre>

<h1 id="launching-with-cli">Launching with CLI</h1>
<p>-conf of the launch command in CLI supports specifying configuration
package in the local filesystem.  Example:</p>
<p>dt> launch DTApp-mydtapp-1.0.0.jar -conf DTConfig-mydtconfig-1.0.0.jar</p>
<p>This command expects both the application package and the configuration
package to be in the local file system.</p>
<h1 id="related-rest-api">Related REST API</h1>
<h2 id="post-wsv2configpackages">POST /ws/v2/configPackages</h2>
<p>Payload: Raw content of configuration package zip
Function: Creates or replace a configuration package zip file in HDFS</p>
<p>Curl example:
$ curl -XPOST -T DTConfig-{name}.jar http://{yourhost:port}/ws/v2/configPackages</p>
<h2 id="get-wsv2configpackagesapppackagenameapppackageversion">GET /ws/v2/configPackages?appPackageName=...&amp;appPackageVersion=...</h2>
<p>All query parameters are optional</p>
<p>Function: Returns the configuration packages that the user is authorized
to use and that are compatible with the specified appPackageName,
appPackageVersion and appName.</p>
<h2 id="get-wsv2configpackagesuserapppackagenameapppackageversion">GET /ws/v2/configPackages/<code>&lt;user&gt;</code>?appPackageName=...&amp;appPackageVersion=...</h2>
<p>All query parameters are optional</p>
<p>Function: Returns the configuration packages under the specified user
and that are compatible with the specified appPackageName,
appPackageVersion and appName.</p>
<h2 id="get-wsv2configpackagesusername">GET /ws/v2/configPackages/<code>&lt;user&gt;</code>/<code>&lt;name&gt;</code></h2>
<p>Function: Returns the information of the specified configuration package</p>
<h2 id="get-wsv2configpackagesusernamedownload">GET /ws/v2/configPackages/<code>&lt;user&gt;</code>/<code>&lt;name&gt;</code>/download</h2>
<p>Function: Returns the raw config package file</p>
<p>Curl example:
$ curl http://{yourhost:port}/ws/v2/configPackages/{user}/{name}/download > DTConfig-xyz.jar</p>
<p>\$ unzip -t DTConfig-xyz.jar</p>
<h2 id="post-wsv2apppackagesuserapp-pkg-nameapp-pkg-versionapplicationsapp-namelaunchconfigpackageuserconfpkgname">POST /ws/v2/appPackages/<code>&lt;user&gt;</code>/<code>&lt;app-pkg-name&gt;</code>/<code>&lt;app-pkg-version&gt;</code>/applications/{app-name}/launch?configPackage=<code>&lt;user&gt;</code>/<code>&lt;confpkgname&gt;</code></h2>
<p>Function: Launches the app package with the specified configuration
package stored in HDFS.</p>
<p>Curl example:</p>
<p>$ curl -XPOST -d ’{}’ http://{yourhost:port}/ws/v2/appPackages/{user}/{app-pkg-name}/{app-pkg-version}/applications/{app-name}/launch?configPackage={user}/{confpkgname}</p>
<p>© 2014-2015 DataTorrent Inc.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../coming_soon/" class="btn btn-neutral float-right" title="Operators"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ApexPackage/" class="btn btn-neutral" title="Application Packages"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../ApexPackage/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../coming_soon/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
