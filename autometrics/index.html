<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AutoMetric API - DataTorrent Documentation</title>
  

  <link rel="shortcut icon" href="../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "AutoMetric API";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44586211-2', 'docs.datatorrent.com');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">DataTorrent RTS</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Demos</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demo_videos/">Videos</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../demos/">Running Apps</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sandbox/">Sandbox</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Development</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../create/">Creating Applications</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <ul class="subnav">
    <li><span>Top N Words</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c1/">Development Environment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c2/">Building in Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c3/">Building with dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c4/">Monitoring with dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c5/">Visualizing with dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/topnwords-c6/">Appendix</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tutorials/sales_dimensions/">Sales Dimensions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex_development_setup/">Apex Development Setup</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../application_development/">Applications</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../application_packages/">Application Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../configuration_packages/">Configuration Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operator_development/">Operators</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Library Operators</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/file_splitter/">File splitter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/block_reader/">Block reader</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">File Input, S3, NFS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/file_output/">File Output</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/deduper/">Deduper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HDHT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../operators/dimensions_computation/">DimenstionComputation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaInput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">KafkaOutput</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Solace</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">JMS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">HBase</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtgateway_api/">REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">AutoMetric API</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#apache-apex-autometrics">Apache Apex AutoMetrics</a></li>
                
            
                <li class="toctree-l3"><a href="#introduction">Introduction</a></li>
                
            
                <li class="toctree-l3"><a href="#specifying-autometrics-in-an-operator">Specifying AutoMetrics in an Operator</a></li>
                
            
                <li class="toctree-l3"><a href="#aggregating-autometrics-across-partitions">Aggregating AutoMetrics across Partitions</a></li>
                
                    <li><a class="toctree-l4" href="#default-aggregators">Default aggregators</a></li>
                
                    <li><a class="toctree-l4" href="#building-custom-aggregators">Building custom aggregators</a></li>
                
            
                <li class="toctree-l3"><a href="#retrieving-autometrics">Retrieving AutoMetrics</a></li>
                
            
                <li class="toctree-l3"><a href="#system-metrics">System Metrics</a></li>
                
            
                <li class="toctree-l3"><a href="#app-data-tracker">App Data Tracker</a></li>
                
            
                <li class="toctree-l3"><a href="#custom-aggregator-in-app-data-tracker">Custom Aggregator in App Data Tracker</a></li>
                
                    <li><a class="toctree-l4" href="#discovery-of-custom-aggregators">Discovery of Custom Aggregators</a></li>
                
            
                <li class="toctree-l3"><a href="#using-metrics_dimensions_scheme">Using METRICS_DIMENSIONS_SCHEME</a></li>
                
            
                <li class="toctree-l3"><a href="#dashboards">Dashboards</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">Scalable Design</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Applications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtingest/">dtIngest</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Platform</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rts/">RTS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtmanage/">dtManage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtassemble/">dtAssemble</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtdashboard/">dtDashboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../coming_soon/">dtGateway</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex/">Apache Apex</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apex_malhar/">Apache Apex-Malhar</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Deployment and Operations</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../configuration/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtgateway_security/">Security</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dtcli/">dtCli</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../troubleshooting/">Troubleshooting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../additional_docs/">Resources</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
    
    <li>AutoMetric API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="apache-apex-autometrics">Apache Apex AutoMetrics</h1>
<h1 id="introduction">Introduction</h1>
<p>Metrics collect various statistical information about a process which can be very useful for diagnosis. Auto Metrics in Apex can help monitor operators in a running application.  The goal of <em>AutoMetric</em> API is to enable operator developer to define relevant metrics for an operator in a simple way which the platform collects and reports automatically.</p>
<h1 id="specifying-autometrics-in-an-operator">Specifying AutoMetrics in an Operator</h1>
<p>An <em>AutoMetric</em> can be any object. It can be of a primitive type - int, long, etc. or a complex one. A field or a <code>get</code> method in an operator can be annotated with <code>@AutoMetric</code> to specify that its value is a metric. After every application end window, the platform collects the values of these fields/methods in a map and sends it to application master.</p>
<pre><code class="java">public class LineReceiver extends BaseOperator
{
 @AutoMetric
 long length;

 @AutoMetric
 long count;

 public final transient DefaultInputPort&lt;String&gt; input = new DefaultInputPort&lt;String&gt;()
 {
   @Override
   public void process(String s)
   {
     length += s.length();
     count++;
   }
 };

 @Override
 public void beginWindow(long windowId)
 {
   length = 0;
   count = 0;
 }
}
</code></pre>

<p>There are 2 auto-metrics declared in the <code>LineReceiver</code>. At the end of each application window, the platform will send a map with 2 entries - <code>[(length, 100), (count, 10)]</code> to the application master.</p>
<h1 id="aggregating-autometrics-across-partitions">Aggregating AutoMetrics across Partitions</h1>
<p>When an operator is partitioned, it is useful to aggregate the values of auto-metrics across all its partitions every window to get a logical view of these metrics. The application master performs these aggregations using metrics aggregators.</p>
<p>The AutoMetric API helps to achieve this by providing an interface for writing aggregators- <code>AutoMetric.Aggregator</code>. Any implementation of <code>AutoMetric.Aggregator</code> can be set as an operator attribute - <code>METRICS_AGGREGATOR</code> for a particular operator which in turn is used for aggregating physical metrics.</p>
<h2 id="default-aggregators">Default aggregators</h2>
<p><a href="https://github.com/apache/incubator-apex-core/blob/devel-3/common/src/main/java/com/datatorrent/common/metric/MetricsAggregator.java"><code>MetricsAggregator</code></a> is a simple implementation of <code>AutoMetric.Aggregator</code> that platform uses as a default for summing up primitive types - int, long, float and double.</p>
<p><code>MetricsAggregator</code> is just a collection of <code>SingleMetricAggregator</code>s. There are multiple implementations of <code>SingleMetricAggregator</code> that perform sum, min, max, avg which are present in Apex core and Apex malhar.</p>
<p>For the <code>LineReceiver</code> operator, the application developer need not specify any aggregator. The platform will automatically inject an instance of <code>MetricsAggregator</code> that contains two <code>LongSumAggregator</code>s - one for <code>length</code> and one for <code>count</code>. This aggregator will report sum of length and sum of count across all the partitions of <code>LineReceiver</code>.</p>
<h2 id="building-custom-aggregators">Building custom aggregators</h2>
<p>Platform cannot perform any meaningful aggregations for non-numeric metrics. In such cases, the operator or application developer can write custom aggregators. Let’s say, if the <code>LineReceiver</code> was modified to have a complex metric as shown below.</p>
<pre><code class="java">public class AnotherLineReceiver extends BaseOperator
{
  @AutoMetric
  final LineMetrics lineMetrics = new LineMetrics();

  public final transient DefaultInputPort&lt;String&gt; input = new DefaultInputPort&lt;String&gt;()
  {
    @Override
    public void process(String s)
    {
      lineMetrics.length += s.length();
      lineMetrics.count++;
    }
  };

  @Override
  public void beginWindow(long windowId)
  {
    lineMetrics.length = 0;
    lineMetrics.count = 0;
  }

  public static class LineMetrics implements Serializable
  {
    long length;
    long count;

    private static final long serialVersionUID = 201511041908L;
  }
}
</code></pre>

<p>Below is a custom aggregator that can calculate average line length across all partitions of <code>AnotherLineReceiver</code>.</p>
<pre><code class="java">public class AvgLineLengthAggregator implements AutoMetric.Aggregator
{

  Map&lt;String, Object&gt; result = Maps.newHashMap();

  @Override
  public Map&lt;String, Object&gt; aggregate(long l, Collection&lt;AutoMetric.PhysicalMetricsContext&gt; collection)
  {
    long totalLength = 0;
    long totalCount = 0;
    for (AutoMetric.PhysicalMetricsContext pmc : collection) {
      AnotherLineReceiver.LineMetrics lm = (AnotherLineReceiver.LineMetrics)pmc.getMetrics().get(&quot;lineMetrics&quot;);
      totalLength += lm.length;
      totalCount += lm.count;
    }
    result.put(&quot;avgLineLength&quot;, totalLength/totalCount);
    return result;
  }
}
</code></pre>

<p>An instance of above aggregator can be specified as the <code>METRIC_AGGREGATOR</code> for <code>AnotherLineReceiver</code> while creating the DAG as shown below.</p>
<pre><code class="java">  @Override
  public void populateDAG(DAG dag, Configuration configuration)
  {
    ...
    AnotherLineReceiver lineReceiver = dag.addOperator(&quot;LineReceiver&quot;, new AnotherLineReceiver());
    dag.setAttribute(lineReceiver, Context.OperatorContext.METRICS_AGGREGATOR, new AvgLineLengthAggregator());
    ...
  }
</code></pre>

<h1 id="retrieving-autometrics">Retrieving AutoMetrics</h1>
<p>The Gateway REST API provides a way to retrieve the latest AutoMetrics for each logical operator.  For example:</p>
<pre><code>GET /ws/v2/applications/{appid}/logicalPlan/operators/{opName}
{
    ...
    &quot;autoMetrics&quot;: {
       &quot;count&quot;: &quot;71314&quot;,
       &quot;length&quot;: &quot;27780706&quot;
    },
    &quot;className&quot;: &quot;com.datatorrent.autometric.LineReceiver&quot;,
    ...
}
</code></pre>

<h1 id="system-metrics">System Metrics</h1>
<p>System metrics are standard operator metrics provided by the system.  Examples include:</p>
<ul>
<li>processed tuples per second</li>
<li>emitted tuples per second</li>
<li>total tuples processed</li>
<li>total tuples emitted</li>
<li>latency</li>
<li>CPU percentage</li>
<li>failure count</li>
<li>checkpoint elapsed time</li>
</ul>
<p>The Gateway REST API provides a way to retrieve the latest values for all of the above for each of the logical operators in the application.</p>
<pre><code>GET /ws/v2/applications/{appid}/logicalPlan/operators/{opName}
{
    ...
    &quot;cpuPercentageMA&quot;: &quot;{cpuPercentageMA}&quot;,
    &quot;failureCount&quot;: &quot;{failureCount}&quot;,
    &quot;latencyMA&quot;: &quot;{latencyMA}&quot;,  
    &quot;totalTuplesEmitted&quot;: &quot;{totalTuplesEmitted}&quot;,
    &quot;totalTuplesProcessed&quot;: &quot;{totalTuplesProcessed}&quot;,
    &quot;tuplesEmittedPSMA&quot;: &quot;{tuplesEmittedPSMA}&quot;,
    &quot;tuplesProcessedPSMA&quot;: &quot;{tuplesProcessedPSMA}&quot;,
    ...
}
</code></pre>

<p>However, just like AutoMetrics, the Gateway only provides the latest metrics.  For historical metrics, we will need the help of App Data Tracker.</p>
<h1 id="app-data-tracker">App Data Tracker</h1>
<p>As discussed above, STRAM aggregates the AutoMetrics from physical operators (partitions) to something that makes sense in one logical operator.  It pushes the aggregated AutoMetrics values using Websocket to the Gateway at every second along with system metrics for each operator.  Gateway relays the information to an application called App Data Tracker.  It is another Apex application that runs in the background and further aggregates the incoming values by time bucket and stores the values in HDHT.  It also allows the outside to retrieve the aggregated AutoMetrics and system metrics through websocket interface.</p>
<p><img alt="AppDataTracker" src="../images/autometrics/adt.png" /></p>
<p>App Data Tracker is enabled by having these properties in dt-site.xml:</p>
<pre><code class="xml">&lt;property&gt;
  &lt;name&gt;dt.appDataTracker.enable&lt;/name&gt;
  &lt;value&gt;true&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;dt.appDataTracker.transport&lt;/name&gt;
  &lt;value&gt;builtin:AppDataTrackerFeed&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;dt.attr.METRICS_TRANSPORT&lt;/name&gt;
  &lt;value&gt;builtin:AppDataTrackerFeed&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<p>All the applications launched after the App Data Tracker is enabled will have metrics sent to it.</p>
<p><strong>Note</strong>: The App Data Tracker will be shown running in dtManage as a “system app”.  It will show up if the “show system apps” button is pressed.</p>
<p>By default, the time buckets App Data Tracker aggregates upon are one minute, one hour and one day.  It can be overridden by changing the operator attribute <code>METRICS_DIMENSIONS_SCHEME</code>.</p>
<p>Also by default, the app data tracker performs all these aggregations: SUM, MIN, MAX, AVG, COUNT, FIRST, LAST on all number metrics.  You can also override by changing the same operator attribute <code>METRICS_DIMENSIONS_SCHEME</code>, provided the custom aggregator is known to the App Data Tracker.  (See next section)</p>
<h1 id="custom-aggregator-in-app-data-tracker">Custom Aggregator in App Data Tracker</h1>
<p>Custom aggregators allow you to do your own custom computation on statistics generated by any of your applications. In order to implement a Custom aggregator you have to do two things:</p>
<ol>
<li>Combining new inputs with the current aggregation</li>
<li>Combining two aggregations together into one aggregation</li>
</ol>
<p>Let’s consider the case where we want to perform the following rolling average:</p>
<p>Y_n = ½ * X_n + ½ * X_n-1 + ¼ * X_n-2 + ⅛ * X_n-3 +...</p>
<p>This aggregation could be performed by the following Custom Aggregator:</p>
<pre><code class="java">@Name(&quot;IIRAVG&quot;)
public class AggregatorIIRAVG extends AbstractIncrementalAggregator
{
  ...

  private void aggregateHelper(DimensionsEvent dest, DimensionsEvent src)
  {
    double[] destVals = dest.getAggregates().getFieldsDouble();
    double[] srcVals = src.getAggregates().getFieldsDouble();

    for (int index = 0; index &lt; destLongs.length; index++) {
      destVals[index] = .5 * destVals[index] + .5 * srcVals[index];
    }
  }

  @Override
  public void aggregate(Aggregate dest, InputEvent src)
  {
    //Aggregate a current aggregation with a new input
    aggregateHelper(dest, src);
  }

  @Override
  public void aggregate(Aggregate destAgg, Aggregate srcAgg)
  {
    //Combine two existing aggregations together
    aggregateHelper(destAgg, srcAgg);
  }
}
</code></pre>

<h2 id="discovery-of-custom-aggregators">Discovery of Custom Aggregators</h2>
<p>AppDataTracker searches for custom aggregator jars under the following directories statically before launching:</p>
<ol>
<li>{dt_installation_dir}/plugin/aggregators</li>
<li>{user_home_dir}/.dt/plugin/aggregators</li>
</ol>
<p>It uses reflection to find all the classes that extend from <code>IncrementalAggregator</code> and <code>OTFAggregator</code> in these jars and registers them with the name provided by <code>@Name</code> annotation (or class name when <code>@Name</code> is absent).</p>
<h1 id="using-metrics_dimensions_scheme">Using <code>METRICS_DIMENSIONS_SCHEME</code></h1>
<p>Here is a sample code snippet on how you can make use of <code>METRICS_DIMENSIONS_SCHEME</code> to set your own time buckets and your own set of aggregators for certain <code>AutoMetric</code>s performed by the App Data Tracker in your application.</p>
<pre><code class="java">  @Override
  public void populateDAG(DAG dag, Configuration configuration)
  {
    ...
    LineReceiver lineReceiver = dag.addOperator(&quot;LineReceiver&quot;, new LineReceiver());
    ...
    AutoMetric.DimensionsScheme dimensionsScheme = new AutoMetric.DimensionsScheme()
    {
      String[] timeBuckets = new String[] { &quot;1s&quot;, &quot;1m&quot;, &quot;1h&quot; };
      String[] lengthAggregators = new String[] { &quot;IIRAVG&quot;, &quot;SUM&quot; };
      String[] countAggregators = new String[] { &quot;SUM&quot; };

      /* Setting the aggregation time bucket to be one second, one minute and one hour */
      @Override
      public String[] getTimeBuckets()
      {
        return timeBuckets;
      }

      @Override
      public String[] getDimensionAggregationsFor(String logicalMetricName)
      {
        if (&quot;length&quot;.equals(logicalMetricName)) {
          return lengthAggregators;
        } else if (&quot;count&quot;.equals(logicalMetricName)) {
          return countAggregators;
        } else {
          return null; // use default
        }
      }
    };

    dag.setAttribute(lineReceiver, OperatorContext.METRICS_DIMENSIONS_SCHEME, dimensionsScheme);
    ...
  }
</code></pre>

<h1 id="dashboards">Dashboards</h1>
<p>With App Data Tracker enabled, you can visualize the AutoMetrics and system metrics in the Dashboards within dtManage.   Refer back to the diagram in the App Data Tracker section, dtGateway relays queries and query results to and from the App Data Tracker.  In this way, dtManage sends queries and receives results from the App Data Tracker via dtGateway and uses the results to let the user visualize the data.</p>
<p>Click on the visualize button in dtManage's application page.</p>
<p><img alt="AppDataTracker" src="../images/autometrics/visualize.png" /></p>
<p>You will see the dashboard for the AutoMetrics and the system metrics.</p>
<p><img alt="AppDataTracker" src="../images/autometrics/dashboard.png" /></p>
<p>The left widget shows the AutoMetrics of <code>line</code> and <code>count</code> for the LineReceiver operator.  The right widget shows the system metrics.</p>
<p>The Dashboards have some simple builtin widgets to visualize the data.  Line charts and bar charts are some examples.
Users will be able to implement their own widgets to visualize their data.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../coming_soon/" class="btn btn-neutral float-right" title="Scalable Design"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dtgateway_api/" class="btn btn-neutral" title="REST API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../dtgateway_api/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../coming_soon/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
